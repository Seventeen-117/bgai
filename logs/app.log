2025-03-12 10:55:13.757 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 10:55:13.808 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 34132 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 10:55:13.809 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 10:55:13.810 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 10:55:15.004 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 10:55:15.005 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 10:55:15.033 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 0 JPA repository interfaces.
2025-03-12 10:55:15.056 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 10:55:15.057 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 10:55:15.076 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-03-12 10:55:15.950 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:15.959 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:15.969 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:15.975 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:15.980 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.023 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.033 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.073 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.186 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.205 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.220 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.226 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.227 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:16.711 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 10:55:16.721 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 10:55:16.723 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 10:55:16.723 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 10:55:16.848 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 10:55:16.848 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2996 ms
2025-03-12 10:55:17.239 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 10:55:17.350 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 10:55:17.409 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 10:55:18.177 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 10:55:18.486 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 10:55:18.914 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 10:55:18.916 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 10:55:19.522 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 10:55:19.531 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 10:55:19.952 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 10:55:19.973 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 10:55:20.017 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 10:55:20.019 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 10:55:20.020 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 10:55:20.037 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 10:55:21.259 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 10:55:21.484 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 10:55:21.850 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 10:55:24.109 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 10:55:24.246 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 10:55:24.261 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 11.075 seconds (process running for 12.654)
2025-03-12 10:55:24.270 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 10:55:24.271 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 10:55:24.282 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 10:55:24.283 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 10:55:24.283 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 10:55:24.300 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 10:55:24.300 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 10:55:24.300 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 10:55:24.308 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 10:55:24.309 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 10:55:24.309 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 10:55:24.317 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 10:55:24.353 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 10:55:24.355 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 10:55:24.360 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 10:55:30.993 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 10:55:31.046 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 31164 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 10:55:31.047 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 10:55:31.048 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 10:55:32.428 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 10:55:32.430 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 10:55:32.457 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 0 JPA repository interfaces.
2025-03-12 10:55:32.471 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 10:55:32.473 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 10:55:32.501 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-03-12 10:55:33.207 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.215 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.225 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.231 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.235 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.269 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.280 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.335 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.458 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.469 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.482 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.485 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.486 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 10:55:33.953 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 10:55:33.962 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 10:55:33.963 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 10:55:33.963 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 10:55:34.076 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 10:55:34.076 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2974 ms
2025-03-12 10:55:34.441 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 10:55:34.499 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 10:55:34.539 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 10:55:34.761 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 10:55:34.821 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 10:55:35.050 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 10:55:35.051 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 10:55:35.403 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 10:55:35.408 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 10:55:35.749 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 10:55:35.766 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 10:55:35.798 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 10:55:35.800 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 10:55:35.801 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 10:55:35.811 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 10:55:37.019 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 10:55:37.233 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 10:55:37.561 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 10:55:40.092 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 10:55:40.193 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 10:55:40.208 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 10:55:40.221 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 9.8 seconds (process running for 11.123)
2025-03-12 10:55:40.230 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 10:55:40.230 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 10:55:40.241 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 10:55:40.241 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 10:55:40.241 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 10:55:40.252 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 10:55:40.252 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 10:55:40.253 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 10:55:40.259 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 10:55:40.260 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 10:55:40.260 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 10:55:40.267 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 10:55:40.529 [RMI TCP Connection(3)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 10:55:40.529 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 10:55:40.531 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-12 10:55:49.267 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 10:55:49.268 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 10:55:49.281 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 10:56:24.477 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 10:56:24.478 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741748150(Long), deepseek-reasoner(String), fp_5417b77867_prod0225(String), b0a46c89-38ac-4cda-a76d-aedd5e0070e4(String)
2025-03-12 10:56:24.498 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 10:56:24.520 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_id,chat_completion_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 10:56:24.520 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 10:56:24.527 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 10:56:24.529 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: b0a46c89-38ac-4cda-a76d-aedd5e0070e4(String), 36(Integer), 471(Integer), 507(Integer), 0(Integer), 343(Integer), 0(Integer), 36(Integer), 2025-03-12T10:56:24.518185700(LocalDateTime), deepseek-reasoner(String)
2025-03-12 10:56:24.529 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 10:56:24.549 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 10:56:24.679 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status = ?) ORDER BY effective_time DESC LIMIT 1
2025-03-12 10:56:24.679 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), input(String), 2025-03-12T10:56:24.677597500(LocalDateTime), miss(String)
2025-03-12 10:56:24.689 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - <==      Total: 1
2025-03-12 10:56:24.840 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status IS NULL) ORDER BY effective_time DESC LIMIT 1
2025-03-12 10:56:24.840 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), output(String), 2025-03-12T10:56:24.838008200(LocalDateTime)
2025-03-12 10:56:24.845 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - <==      Total: 1
2025-03-12 10:56:24.875 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 10:56:24.876 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==> Parameters: 689258T(String)
2025-03-12 10:56:24.881 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - <==      Total: 1
2025-03-12 10:56:24.881 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - 计费记录 - 会话ID:689258T 模型类型:deepseek-reasoner 输入费用:0.0001 输出费用:0.0075
2025-03-12 10:56:24.888 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_id, chat_completion_id, input_cost, output_cost, price_version, calculated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2025-03-12 10:56:24.890 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==> Parameters: 1(Integer), 689258T(String), 0.0001(BigDecimal), 0.0075(BigDecimal), 1(Integer), 2025-03-12T10:56:24.881564(LocalDateTime)
2025-03-12 10:56:24.902 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - <==    Updates: 1
2025-03-12 11:00:42.237 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:00:42.238 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:00:42.245 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:00:42.245 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:00:42.246 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:00:42.251 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:01:03.731 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 11:01:03.749 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 11:01:03.756 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 11:01:06.937 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 11:01:06.976 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 2704 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 11:01:06.977 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 11:01:06.977 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 11:01:07.949 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 11:01:07.950 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 11:01:07.972 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 JPA repository interfaces.
2025-03-12 11:01:07.981 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 11:01:07.982 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 11:01:07.992 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 11:01:08.635 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.642 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.651 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.655 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.659 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.689 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.697 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.738 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.824 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.831 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.839 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.842 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:08.843 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:01:09.263 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 11:01:09.271 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 11:01:09.272 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 11:01:09.273 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 11:01:09.368 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 11:01:09.368 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2356 ms
2025-03-12 11:01:09.679 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 11:01:09.725 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 11:01:09.754 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 11:01:09.958 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 11:01:10.015 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 11:01:10.224 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 11:01:10.225 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 11:01:10.520 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 11:01:10.525 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 11:01:10.809 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:01:10.825 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:01:10.854 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:01:10.856 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:01:10.856 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:01:10.867 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:01:11.819 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 11:01:12.002 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 11:01:12.305 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 11:01:14.247 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 11:01:14.350 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 11:01:14.361 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 11:01:14.373 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.906 seconds (process running for 8.879)
2025-03-12 11:01:14.380 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:01:14.381 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:01:14.392 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:01:14.392 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:01:14.392 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:01:14.402 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:01:14.402 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:01:14.403 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:01:14.411 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:01:14.411 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:01:14.411 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:01:14.418 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:01:14.716 [RMI TCP Connection(2)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 11:01:14.717 [RMI TCP Connection(2)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 11:01:14.726 [RMI TCP Connection(2)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-03-12 11:01:44.645 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 11:01:44.646 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 11:01:44.656 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 11:06:16.413 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:06:16.414 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:06:16.423 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:06:16.424 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:06:16.424 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:06:16.431 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:27:54.425 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 11:27:54.457 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 26468 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 11:27:54.458 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 11:27:54.458 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 11:27:55.355 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 11:27:55.357 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 11:27:55.378 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2025-03-12 11:27:55.387 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 11:27:55.388 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 11:27:55.397 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 11:27:56.042 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.049 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.058 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.062 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.066 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.106 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.115 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.145 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.230 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.237 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.246 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.249 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.249 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:27:56.651 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 11:27:56.659 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 11:27:56.661 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 11:27:56.661 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 11:27:56.753 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 11:27:56.754 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2264 ms
2025-03-12 11:27:57.078 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 11:27:57.127 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 11:27:57.156 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 11:27:57.355 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 11:27:57.411 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 11:27:57.603 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 11:27:57.608 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 11:27:57.879 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 11:27:57.883 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 11:27:58.157 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:27:58.174 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:27:58.199 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:27:58.201 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:27:58.201 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:27:58.212 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:27:59.120 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 11:27:59.295 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 11:27:59.630 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 11:28:01.428 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 11:28:01.527 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 11:28:01.537 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 11:28:01.550 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.522 seconds (process running for 8.276)
2025-03-12 11:28:01.566 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:28:01.566 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:28:01.575 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:28:01.576 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:28:01.576 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:28:01.586 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:28:01.586 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:28:01.586 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:28:01.592 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:28:01.592 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:28:01.592 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:28:01.597 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:28:02.002 [RMI TCP Connection(4)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 11:28:02.002 [RMI TCP Connection(4)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 11:28:02.005 [RMI TCP Connection(4)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-03-12 11:28:06.430 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 11:28:06.431 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 11:28:06.439 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 11:28:44.455 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 11:28:44.457 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741750087(Long), deepseek-reasoner(String), fp_5417b77867_prod0225(String), 338e2887-e2ed-4654-ad70-3c2d3e91b25a(String)
2025-03-12 11:28:44.471 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 11:28:44.493 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_id,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 11:28:44.494 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: 338e2887-e2ed-4654-ad70-3c2d3e91b25a(String)
2025-03-12 11:28:44.505 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 11:28:44.507 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 11:28:44.508 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: 338e2887-e2ed-4654-ad70-3c2d3e91b25a(String), 32(Integer), 469(Integer), 501(Integer), 0(Integer), 375(Integer), 0(Integer), 32(Integer), 2025-03-12T11:28:44.492487900(LocalDateTime), deepseek-reasoner(String)
2025-03-12 11:28:44.522 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 11:28:44.622 [http-nio-8080-exec-2] ERROR c.b.b.s.impl.BillingServiceImpl - Process failed for 338e2887-e2ed-4654-ad70-3c2d3e91b25a
java.lang.ClassCastException: class java.util.LinkedHashMap cannot be cast to class com.bgpay.bgai.entity.PriceConfig (java.util.LinkedHashMap is in module java.base of loader 'bootstrap'; com.bgpay.bgai.entity.PriceConfig is in unnamed module of loader 'app')
	at com.bgpay.bgai.service.impl.PriceCacheServiceImpl$$SpringCGLIB$$0.getPriceConfig(<generated>)
	at com.bgpay.bgai.service.impl.BillingServiceImpl.calculateInputCost(BillingServiceImpl.java:187)
	at com.bgpay.bgai.service.impl.BillingServiceImpl.processSingleRecord(BillingServiceImpl.java:83)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.bgpay.bgai.service.impl.BillingServiceImpl$$SpringCGLIB$$0.processSingleRecord(<generated>)
	at com.bgpay.bgai.controller.EnhancedChatController.recordUsageData(EnhancedChatController.java:131)
	at com.bgpay.bgai.controller.EnhancedChatController.handleChatRequest(EnhancedChatController.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.bgpay.bgai.controller.EnhancedChatController$$SpringCGLIB$$0.handleChatRequest(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-03-12 11:33:03.589 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:33:03.590 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:33:03.599 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:33:03.600 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:33:03.600 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:33:03.608 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:36:46.476 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 11:36:46.482 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 11:36:46.485 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 11:39:11.268 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 11:39:11.302 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 30960 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 11:39:11.302 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 11:39:11.303 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 11:39:12.243 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 11:39:12.244 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 11:39:12.267 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 JPA repository interfaces.
2025-03-12 11:39:12.284 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 11:39:12.285 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 11:39:12.299 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-03-12 11:39:12.963 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:12.971 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:12.979 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:12.983 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:12.987 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.021 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.030 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.080 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.176 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.186 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.196 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.199 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.199 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 11:39:13.622 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 11:39:13.630 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 11:39:13.632 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 11:39:13.632 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 11:39:13.732 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 11:39:13.732 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2398 ms
2025-03-12 11:39:14.046 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 11:39:14.092 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 11:39:14.121 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 11:39:14.341 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 11:39:14.404 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 11:39:14.615 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 11:39:14.617 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 11:39:14.935 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 11:39:14.940 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 11:39:15.223 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:39:15.243 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:39:15.270 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:39:15.273 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:39:15.273 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:39:15.284 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:39:16.292 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 11:39:16.502 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 11:39:16.891 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 11:39:18.906 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 11:39:18.997 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 11:39:19.008 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 11:39:19.022 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 8.133 seconds (process running for 8.895)
2025-03-12 11:39:19.031 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:39:19.031 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:39:19.042 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:39:19.043 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 11:39:19.043 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 11:39:19.055 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 11:39:19.055 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:39:19.055 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:39:19.061 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:39:19.062 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 11:39:19.062 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 11:39:19.068 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 11:39:19.371 [RMI TCP Connection(2)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 11:39:19.371 [RMI TCP Connection(2)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 11:39:19.373 [RMI TCP Connection(2)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-12 11:40:03.513 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 11:40:03.515 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 11:40:03.522 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 11:40:49.554 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 11:40:49.556 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741750804(Long), deepseek-reasoner(String), fp_5417b77867_prod0225(String), b6df1601-10a6-4f5b-b055-753786a9f0f8(String)
2025-03-12 11:40:49.571 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 11:40:49.602 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 11:40:49.604 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: b6df1601-10a6-4f5b-b055-753786a9f0f8(String), 32(Integer), 435(Integer), 467(Integer), 0(Integer), 361(Integer), 0(Integer), 32(Integer), 2025-03-12T11:40:49.594912200(LocalDateTime), deepseek-reasoner(String)
2025-03-12 11:40:49.618 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 11:40:49.619 [http-nio-8080-exec-2] WARN  c.a.d.pool.DruidAbstractDataSource - discard long time none received connection. , jdbcUrl : jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false, version : 1.2.8, lastPacketReceivedIdleMillis : 90538
2025-03-12 11:40:49.635 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_id,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 11:40:49.636 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: b6df1601-10a6-4f5b-b055-753786a9f0f8(String)
2025-03-12 11:40:49.643 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 11:40:49.744 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.PriceCacheServiceImpl - Deleted 3 annotation cache keys
2025-03-12 11:40:49.813 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status = ?) ORDER BY effective_time DESC LIMIT 1
2025-03-12 11:40:49.814 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), input(String), 2025-03-12T11:40:49.812877800(LocalDateTime), miss(String)
2025-03-12 11:40:49.822 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - <==      Total: 1
2025-03-12 11:40:49.904 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.PriceCacheServiceImpl - Deleted 1 manual cache keys
2025-03-12 11:40:49.918 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.PriceCacheServiceImpl - Deleted 1 annotation cache keys
2025-03-12 11:40:49.960 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status IS NULL) ORDER BY effective_time DESC LIMIT 1
2025-03-12 11:40:49.960 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), output(String), 2025-03-12T11:40:49.958909600(LocalDateTime)
2025-03-12 11:40:49.968 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - <==      Total: 1
2025-03-12 11:40:50.000 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 11:40:50.000 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==> Parameters: b6df1601-10a6-4f5b-b055-753786a9f0f8(String)
2025-03-12 11:40:50.007 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - <==      Total: 1
2025-03-12 11:40:50.007 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - 计费记录 - 会话ID:b6df1601-10a6-4f5b-b055-753786a9f0f8 模型类型:deepseek-reasoner 输入费用:0.0001 输出费用:0.0070
2025-03-12 11:40:50.015 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_id, chat_completion_id, user_id, input_cost, output_cost, price_version, calculated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2025-03-12 11:40:50.016 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==> Parameters: 1(Integer), b6df1601-10a6-4f5b-b055-753786a9f0f8(String), 689258T(String), 0.0001(BigDecimal), 0.0070(BigDecimal), 1(Integer), 2025-03-12T11:40:50.007689700(LocalDateTime)
2025-03-12 11:40:50.028 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - <==    Updates: 1
2025-03-12 11:42:44.742 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 11:42:44.745 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 11:42:44.748 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 12:01:27.444 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 12:01:27.478 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 38048 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 12:01:27.478 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 12:01:27.478 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 12:01:28.420 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:01:28.421 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 12:01:28.442 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2025-03-12 12:01:28.451 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:01:28.452 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 12:01:28.461 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 12:01:29.103 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.111 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.130 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.135 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.139 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.172 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.180 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.212 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.307 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.315 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.325 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.329 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.329 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:01:29.741 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 12:01:29.748 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 12:01:29.750 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 12:01:29.750 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 12:01:29.854 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 12:01:29.855 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2345 ms
2025-03-12 12:01:30.190 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 12:01:30.241 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 12:01:30.270 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 12:01:30.475 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 12:01:30.528 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 12:01:30.750 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 12:01:30.751 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 12:01:31.051 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 12:01:31.056 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:01:31.335 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:01:31.352 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:01:31.379 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:01:31.382 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:01:31.382 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:01:31.397 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:01:32.340 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 12:01:32.519 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:01:32.840 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:01:34.658 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 12:01:34.761 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 12:01:34.773 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 12:01:34.786 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.718 seconds (process running for 8.462)
2025-03-12 12:01:34.794 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:01:34.794 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:01:34.805 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:01:34.805 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:01:34.806 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:01:34.817 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:01:34.817 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:01:34.817 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:01:34.825 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:01:34.825 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:01:34.825 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:01:34.833 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:01:35.030 [RMI TCP Connection(4)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 12:01:35.030 [RMI TCP Connection(4)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 12:01:35.033 [RMI TCP Connection(4)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-12 12:01:50.894 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 12:01:50.895 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 12:01:50.904 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 12:02:30.972 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 12:02:30.973 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741752112(Long), deepseek-reasoner(String), fp_5417b77867_prod0311fp8(String), ca6fad93-461f-4b13-9295-e66411f20d88(String)
2025-03-12 12:02:30.989 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 12:02:31.011 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_id,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:02:31.011 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: ca6fad93-461f-4b13-9295-e66411f20d88(String)
2025-03-12 12:02:31.016 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:02:31.017 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 12:02:31.018 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: ca6fad93-461f-4b13-9295-e66411f20d88(String), 32(Integer), 544(Integer), 576(Integer), 0(Integer), 461(Integer), 0(Integer), 32(Integer), 2025-03-12T12:02:31.009033(LocalDateTime), deepseek-reasoner(String)
2025-03-12 12:02:31.032 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 12:02:31.102 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status = ?) ORDER BY effective_time DESC LIMIT 1
2025-03-12 12:02:31.103 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), input(String), 2025-03-12T12:02:31.101271100(LocalDateTime), miss(String)
2025-03-12 12:02:31.110 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - <==      Total: 1
2025-03-12 12:02:31.200 [http-nio-8080-exec-2] ERROR c.b.b.s.impl.BillingServiceImpl - Process failed for ca6fad93-461f-4b13-9295-e66411f20d88
java.lang.ClassCastException: class java.util.LinkedHashMap cannot be cast to class com.bgpay.bgai.entity.PriceConfig (java.util.LinkedHashMap is in module java.base of loader 'bootstrap'; com.bgpay.bgai.entity.PriceConfig is in unnamed module of loader 'app')
	at com.bgpay.bgai.service.impl.PriceCacheServiceImpl$$SpringCGLIB$$0.getPriceConfig(<generated>)
	at com.bgpay.bgai.service.impl.BillingServiceImpl.calculateOutputCost(BillingServiceImpl.java:115)
	at com.bgpay.bgai.service.impl.BillingServiceImpl.processSingleRecord(BillingServiceImpl.java:85)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.bgpay.bgai.service.impl.BillingServiceImpl$$SpringCGLIB$$0.processSingleRecord(<generated>)
	at com.bgpay.bgai.controller.EnhancedChatController.recordUsageData(EnhancedChatController.java:131)
	at com.bgpay.bgai.controller.EnhancedChatController.handleChatRequest(EnhancedChatController.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.bgpay.bgai.controller.EnhancedChatController$$SpringCGLIB$$0.handleChatRequest(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-03-12 12:02:50.457 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:02:50.463 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 12:02:50.478 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 12:16:33.832 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 12:16:33.864 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 35896 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 12:16:33.865 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 12:16:33.865 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 12:16:34.770 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:16:34.772 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 12:16:34.793 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2025-03-12 12:16:34.803 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:16:34.804 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 12:16:34.814 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 12:16:35.436 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.445 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.453 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.458 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.461 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.503 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.512 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.541 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.646 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.655 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.668 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.671 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:35.671 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:16:36.083 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 12:16:36.091 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 12:16:36.092 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 12:16:36.092 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 12:16:36.186 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 12:16:36.186 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2291 ms
2025-03-12 12:16:36.501 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 12:16:36.546 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 12:16:36.581 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 12:16:36.789 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 12:16:36.846 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 12:16:37.047 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 12:16:37.053 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 12:16:37.331 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 12:16:37.335 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:16:37.599 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:16:37.615 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:16:37.644 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:16:37.646 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:16:37.647 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:16:37.657 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:16:38.595 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 12:16:38.780 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:16:39.096 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:16:40.918 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 12:16:41.009 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 12:16:41.020 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 12:16:41.032 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.571 seconds (process running for 8.331)
2025-03-12 12:16:41.042 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:16:41.043 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:16:41.053 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:16:41.054 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:16:41.054 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:16:41.064 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:16:41.064 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:16:41.064 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:16:41.072 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:16:41.073 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:16:41.073 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:16:41.080 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:16:41.408 [RMI TCP Connection(2)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 12:16:41.409 [RMI TCP Connection(2)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 12:16:41.411 [RMI TCP Connection(2)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-12 12:16:41.734 [boundedElastic-1] WARN  o.s.b.a.d.r.RedisReactiveHealthIndicator - Redis health check failed
org.springframework.data.redis.RedisSystemException: Redis exception
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:72)
	at org.springframework.data.redis.connection.lettuce.LettuceReactiveRedisConnection.lambda$translateException$0(LettuceReactiveRedisConnection.java:242)
	at reactor.core.publisher.Flux.lambda$onErrorMap$27(Flux.java:7204)
	at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94)
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onError(MonoFlatMapMany.java:255)
	at reactor.core.publisher.MonoNext$NextSubscriber.onError(MonoNext.java:93)
	at io.lettuce.core.RedisPublisher$ImmediateSubscriber.onError(RedisPublisher.java:895)
	at io.lettuce.core.RedisPublisher$State.onError(RedisPublisher.java:716)
	at io.lettuce.core.RedisPublisher$RedisSubscription.onError(RedisPublisher.java:357)
	at io.lettuce.core.RedisPublisher$SubscriptionCommand.onError(RedisPublisher.java:801)
	at io.lettuce.core.RedisPublisher$SubscriptionCommand.doOnError(RedisPublisher.java:797)
	at io.lettuce.core.protocol.CommandWrapper.completeExceptionally(CommandWrapper.java:128)
	at io.lettuce.core.protocol.DefaultEndpoint.write(DefaultEndpoint.java:182)
	at io.lettuce.core.protocol.CommandExpiryWriter.write(CommandExpiryWriter.java:116)
	at io.lettuce.core.RedisChannelHandler.dispatch(RedisChannelHandler.java:218)
	at io.lettuce.core.StatefulRedisConnectionImpl.dispatch(StatefulRedisConnectionImpl.java:163)
	at io.lettuce.core.RedisPublisher$RedisSubscription.dispatchCommand(RedisPublisher.java:395)
	at io.lettuce.core.RedisPublisher$CommandDispatch$1.dispatch(RedisPublisher.java:470)
	at io.lettuce.core.RedisPublisher$RedisSubscription.checkCommandDispatch(RedisPublisher.java:390)
	at io.lettuce.core.RedisPublisher$State$2.request(RedisPublisher.java:541)
	at io.lettuce.core.RedisPublisher$RedisSubscription.request(RedisPublisher.java:248)
	at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108)
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onSubscribeInner(MonoFlatMapMany.java:150)
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onSubscribe(MonoFlatMapMany.java:245)
	at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70)
	at io.lettuce.core.RedisPublisher$State$1.subscribe(RedisPublisher.java:518)
	at io.lettuce.core.RedisPublisher$RedisSubscription.subscribe(RedisPublisher.java:231)
	at io.lettuce.core.RedisPublisher.subscribe(RedisPublisher.java:130)
	at reactor.core.publisher.MonoFromPublisher.subscribe(MonoFromPublisher.java:64)
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onNext(MonoFlatMapMany.java:195)
	at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)
	at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
	at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onSubscribe(MonoFlatMapMany.java:141)
	at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)
	at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:252)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: io.lettuce.core.RedisException: Connection is closed
	at io.lettuce.core.protocol.DefaultEndpoint.validateWrite(DefaultEndpoint.java:284)
	at io.lettuce.core.protocol.DefaultEndpoint.write(DefaultEndpoint.java:180)
	... 33 common frames omitted
2025-03-12 12:16:41.863 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:16:41.865 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 12:16:41.869 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 12:16:59.549 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 12:16:59.586 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 37836 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 12:16:59.587 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 12:16:59.587 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 12:17:00.487 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:17:00.489 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 12:17:00.512 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 JPA repository interfaces.
2025-03-12 12:17:00.523 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:17:00.524 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 12:17:00.533 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 12:17:01.158 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.165 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.174 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.180 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.185 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.230 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.238 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.268 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.360 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.367 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.377 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.380 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.380 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:17:01.817 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 12:17:01.825 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 12:17:01.827 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 12:17:01.827 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 12:17:01.937 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 12:17:01.937 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2315 ms
2025-03-12 12:17:02.242 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 12:17:02.289 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 12:17:02.318 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 12:17:02.510 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 12:17:02.561 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 12:17:03.779 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 12:17:03.780 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 12:17:04.076 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 12:17:04.080 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:17:04.362 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:17:04.377 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:17:04.408 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:17:04.410 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:17:04.410 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:17:04.420 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:17:05.340 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 12:17:05.510 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:17:05.818 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:17:07.637 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 12:17:07.736 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 12:17:07.747 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 12:17:07.758 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 8.607 seconds (process running for 9.366)
2025-03-12 12:17:07.767 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:17:07.767 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:17:07.778 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:17:07.778 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:17:07.778 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:17:07.789 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:17:07.789 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:17:07.789 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:17:07.795 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:17:07.795 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:17:07.795 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:17:07.801 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:17:08.073 [RMI TCP Connection(3)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 12:17:08.073 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 12:17:08.075 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-12 12:17:13.553 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:17:13.556 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 12:17:13.562 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 12:24:45.363 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 12:24:45.394 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 2016 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 12:24:45.395 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 12:24:45.395 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 12:24:46.342 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:24:46.344 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 12:24:46.366 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 JPA repository interfaces.
2025-03-12 12:24:46.377 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:24:46.378 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 12:24:46.388 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 12:24:47.022 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.031 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.040 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.046 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.050 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.093 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.101 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.132 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.220 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.229 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.238 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.242 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.243 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:24:47.667 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 12:24:47.674 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 12:24:47.675 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 12:24:47.676 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 12:24:47.772 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 12:24:47.772 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2347 ms
2025-03-12 12:24:48.082 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 12:24:48.127 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 12:24:48.156 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 12:24:48.369 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 12:24:48.420 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 12:24:48.623 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 12:24:48.624 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 12:24:48.916 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 12:24:48.920 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:24:49.189 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:24:49.204 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:24:49.231 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:24:49.234 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:24:49.234 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:24:49.243 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:24:50.177 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 12:24:50.362 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:24:50.676 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:24:52.457 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 12:24:52.554 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 12:24:52.565 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 12:24:52.577 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.657 seconds (process running for 8.393)
2025-03-12 12:24:52.586 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:24:52.586 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:24:52.597 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:24:52.597 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:24:52.597 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:24:52.606 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:24:52.607 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:24:52.607 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:24:52.614 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:24:52.614 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:24:52.614 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:24:52.621 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:24:52.868 [RMI TCP Connection(3)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 12:24:52.868 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 12:24:52.870 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-12 12:24:58.396 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 12:24:58.398 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 12:24:58.406 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 12:25:48.603 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 12:25:48.605 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741753499(Long), deepseek-reasoner(String), fp_5417b77867_prod0311fp8(String), f2dcc2f3-3b7c-4aa9-ab90-7607a17c415b(String)
2025-03-12 12:25:48.619 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 12:25:48.652 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_id,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:25:48.652 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: f2dcc2f3-3b7c-4aa9-ab90-7607a17c415b(String)
2025-03-12 12:25:48.657 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 12:25:48.661 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:25:48.663 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: f2dcc2f3-3b7c-4aa9-ab90-7607a17c415b(String), 32(Integer), 660(Integer), 692(Integer), 0(Integer), 455(Integer), 0(Integer), 32(Integer), 2025-03-12T12:25:48.650808300(LocalDateTime), deepseek-reasoner(String)
2025-03-12 12:25:48.678 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 12:25:48.821 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:25:48.821 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==> Parameters: f2dcc2f3-3b7c-4aa9-ab90-7607a17c415b(String)
2025-03-12 12:25:48.827 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - <==      Total: 1
2025-03-12 12:25:48.828 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - 计费记录 - 会话ID:f2dcc2f3-3b7c-4aa9-ab90-7607a17c415b 模型类型:deepseek-reasoner 输入费用:0.0001 输出费用:0.0106
2025-03-12 12:25:48.836 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_id, chat_completion_id, user_id, input_cost, output_cost, price_version, calculated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:25:48.837 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==> Parameters: 1(Integer), f2dcc2f3-3b7c-4aa9-ab90-7607a17c415b(String), 689258T(String), 0.0001(BigDecimal), 0.0106(BigDecimal), 1(Integer), 2025-03-12T12:25:48.828444400(LocalDateTime)
2025-03-12 12:25:48.861 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - <==    Updates: 1
2025-03-12 12:26:02.867 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:26:02.870 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 12:26:02.876 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 12:27:50.730 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 12:27:50.764 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 13412 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 12:27:50.765 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 12:27:50.765 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 12:27:51.688 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:27:51.690 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 12:27:51.711 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2025-03-12 12:27:51.720 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:27:51.721 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 12:27:51.730 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 12:27:52.363 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.371 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.380 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.385 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.389 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.420 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.428 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.467 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.553 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.560 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.569 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.573 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.574 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:27:52.982 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 12:27:52.990 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 12:27:52.991 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 12:27:52.991 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 12:27:53.091 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 12:27:53.092 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2295 ms
2025-03-12 12:27:53.437 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 12:27:53.485 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 12:27:53.521 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 12:27:53.718 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 12:27:53.769 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 12:27:53.976 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 12:27:53.978 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 12:27:54.271 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 12:27:54.277 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:27:54.572 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:27:54.589 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:27:54.615 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:27:54.617 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:27:54.618 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:27:54.628 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:27:55.553 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 12:27:55.737 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:27:56.075 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:27:58.304 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 12:27:58.396 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 12:27:58.408 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 12:27:58.421 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 8.07 seconds (process running for 8.817)
2025-03-12 12:27:58.430 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:27:58.430 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:27:58.443 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:27:58.443 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:27:58.443 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:27:58.455 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:27:58.456 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:27:58.456 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:27:58.464 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:27:58.464 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:27:58.464 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:27:58.469 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:27:58.792 [RMI TCP Connection(3)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 12:27:58.792 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 12:27:58.795 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-12 12:27:59.917 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 12:27:59.918 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 12:27:59.927 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 12:28:40.313 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 12:28:40.315 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741753681(Long), deepseek-reasoner(String), fp_5417b77867_prod0311fp8(String), c01f854b-a4ea-4729-a3a8-6bc9dfb187b7(String)
2025-03-12 12:28:40.330 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 12:28:40.355 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_id,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:28:40.356 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: c01f854b-a4ea-4729-a3a8-6bc9dfb187b7(String)
2025-03-12 12:28:40.359 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:28:40.361 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: c01f854b-a4ea-4729-a3a8-6bc9dfb187b7(String), 32(Integer), 546(Integer), 578(Integer), 0(Integer), 471(Integer), 0(Integer), 32(Integer), 2025-03-12T12:28:40.351353200(LocalDateTime), deepseek-reasoner(String)
2025-03-12 12:28:40.363 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 12:28:40.376 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 12:28:40.498 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:28:40.498 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==> Parameters: c01f854b-a4ea-4729-a3a8-6bc9dfb187b7(String)
2025-03-12 12:28:40.507 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - <==      Total: 1
2025-03-12 12:28:40.508 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - 计费记录 - 会话ID:c01f854b-a4ea-4729-a3a8-6bc9dfb187b7 模型类型:deepseek-reasoner 输入费用:0.0001 输出费用:0.0087
2025-03-12 12:28:40.514 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_id, chat_completion_id, user_id, input_cost, output_cost, price_version, calculated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:28:40.515 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==> Parameters: 1(Integer), c01f854b-a4ea-4729-a3a8-6bc9dfb187b7(String), 689258T(String), 0.0001(BigDecimal), 0.0087(BigDecimal), 1(Integer), 2025-03-12T12:28:40.508090100(LocalDateTime)
2025-03-12 12:28:40.526 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - <==    Updates: 1
2025-03-12 12:29:34.391 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:29:34.394 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 12:29:34.401 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 12:29:37.709 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 12:29:37.746 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 7588 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 12:29:37.746 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 12:29:37.747 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 12:29:38.681 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:29:38.682 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 12:29:38.704 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 JPA repository interfaces.
2025-03-12 12:29:38.714 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:29:38.714 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 12:29:38.726 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-03-12 12:29:39.348 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.356 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.365 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.370 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.374 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.423 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.432 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.464 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.552 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.565 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.577 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.581 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:39.581 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:29:40.004 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 12:29:40.011 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 12:29:40.012 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 12:29:40.013 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 12:29:40.112 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 12:29:40.112 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2332 ms
2025-03-12 12:29:40.436 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 12:29:40.481 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 12:29:40.512 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 12:29:40.735 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 12:29:40.792 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 12:29:41.002 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 12:29:41.008 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 12:29:41.292 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 12:29:41.297 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:29:41.568 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:29:41.584 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:29:41.611 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:29:41.613 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:29:41.614 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:29:41.625 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:29:42.589 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 12:29:42.769 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:29:43.099 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:29:44.988 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 12:29:45.084 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 12:29:45.097 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 12:29:45.110 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.781 seconds (process running for 8.671)
2025-03-12 12:29:45.122 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:29:45.123 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:29:45.134 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:29:45.134 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:29:45.134 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:29:45.145 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:29:45.145 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:29:45.146 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:29:45.153 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:29:45.153 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:29:45.153 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:29:45.161 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:29:45.614 [RMI TCP Connection(3)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 12:29:45.614 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 12:29:45.618 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-03-12 12:29:46.236 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 12:29:46.238 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 12:29:46.247 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 12:31:03.634 [http-nio-8080-exec-2] WARN  c.a.d.pool.DruidAbstractDataSource - discard long time none received connection. , jdbcUrl : jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false, version : 1.2.8, lastPacketReceivedIdleMillis : 77371
2025-03-12 12:31:03.639 [http-nio-8080-exec-2] WARN  c.a.d.pool.DruidAbstractDataSource - discard long time none received connection. , jdbcUrl : jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false, version : 1.2.8, lastPacketReceivedIdleMillis : 78478
2025-03-12 12:31:03.720 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 12:31:03.722 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741753787(Long), deepseek-reasoner(String), fp_5417b77867_prod0311fp8(String), 5cede462-58d6-4730-bfc2-1d7a8eac2af8(String)
2025-03-12 12:31:03.738 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 12:31:03.770 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:31:03.771 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: 5cede462-58d6-4730-bfc2-1d7a8eac2af8(String), 1821(Integer), 1519(Integer), 3340(Integer), 0(Integer), 696(Integer), 0(Integer), 1821(Integer), 2025-03-12T12:31:03.761821(LocalDateTime), deepseek-reasoner(String)
2025-03-12 12:31:03.789 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 12:31:03.807 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_id,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:31:03.807 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: 5cede462-58d6-4730-bfc2-1d7a8eac2af8(String)
2025-03-12 12:31:03.815 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 12:31:03.959 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:31:03.959 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==> Parameters: 5cede462-58d6-4730-bfc2-1d7a8eac2af8(String)
2025-03-12 12:31:03.966 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - <==      Total: 1
2025-03-12 12:31:03.966 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - 计费记录 - 会话ID:5cede462-58d6-4730-bfc2-1d7a8eac2af8 模型类型:deepseek-reasoner 输入费用:0.0073 输出费用:0.0243
2025-03-12 12:31:03.975 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_id, chat_completion_id, user_id, input_cost, output_cost, price_version, calculated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:31:03.976 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==> Parameters: 1(Integer), 5cede462-58d6-4730-bfc2-1d7a8eac2af8(String), 689258T(String), 0.0073(BigDecimal), 0.0243(BigDecimal), 1(Integer), 2025-03-12T12:31:03.967940100(LocalDateTime)
2025-03-12 12:31:03.990 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - <==    Updates: 1
2025-03-12 12:31:22.417 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:31:22.420 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 12:31:22.423 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 12:53:22.509 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 12:53:22.542 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 33364 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 12:53:22.543 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 12:53:22.543 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 12:53:23.487 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:53:23.488 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 12:53:23.509 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2025-03-12 12:53:23.519 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 12:53:23.520 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 12:53:23.528 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 12:53:24.154 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.161 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.169 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.173 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.177 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.208 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.217 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.256 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.344 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.352 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.360 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.365 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.365 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 12:53:24.797 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 12:53:24.805 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 12:53:24.806 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 12:53:24.807 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 12:53:24.908 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 12:53:24.908 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2335 ms
2025-03-12 12:53:25.246 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 12:53:25.295 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 12:53:25.324 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 12:53:25.519 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 12:53:25.571 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 12:53:25.787 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 12:53:25.788 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 12:53:26.068 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 12:53:26.072 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 12:53:26.354 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:53:26.371 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:53:26.398 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:53:26.401 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:53:26.401 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:53:26.412 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:53:27.345 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 12:53:27.522 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:53:27.839 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 12:53:29.758 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 12:53:29.852 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 12:53:29.863 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 12:53:29.875 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.771 seconds (process running for 8.533)
2025-03-12 12:53:29.884 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:53:29.884 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:53:29.894 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:53:29.894 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:53:29.894 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:53:29.904 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:53:29.905 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:53:29.905 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:53:29.912 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:53:29.913 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:53:29.913 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:53:29.919 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 12:53:30.091 [RMI TCP Connection(3)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 12:53:30.091 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 12:53:30.094 [RMI TCP Connection(3)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-03-12 12:53:31.697 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 12:53:31.699 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 12:53:31.707 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 12:54:14.596 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 12:54:14.599 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741755212(Long), deepseek-reasoner(String), fp_5417b77867_prod0311fp8(String), f504f696-cefe-4e80-a864-4dce41bbcf5d(String)
2025-03-12 12:54:14.613 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 12:54:14.636 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_type,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:54:14.636 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: f504f696-cefe-4e80-a864-4dce41bbcf5d(String)
2025-03-12 12:54:14.641 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 12:54:14.642 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:54:14.643 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: f504f696-cefe-4e80-a864-4dce41bbcf5d(String), 32(Integer), 508(Integer), 540(Integer), 0(Integer), 389(Integer), 0(Integer), 32(Integer), 2025-03-12T12:54:14.634785400(LocalDateTime), deepseek-reasoner(String)
2025-03-12 12:54:14.658 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 12:54:14.802 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status IS NULL) ORDER BY effective_time DESC LIMIT 1
2025-03-12 12:54:14.802 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), output(String), 2025-03-12T12:54:14.800108(LocalDateTime)
2025-03-12 12:54:14.811 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - <==      Total: 1
2025-03-12 12:54:14.846 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 12:54:14.846 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==> Parameters: f504f696-cefe-4e80-a864-4dce41bbcf5d(String)
2025-03-12 12:54:14.852 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - <==      Total: 1
2025-03-12 12:54:14.852 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - 计费记录 - 会话ID:f504f696-cefe-4e80-a864-4dce41bbcf5d 模型类型:deepseek-reasoner 输入费用:0.0001 输出费用:0.0081
2025-03-12 12:54:14.861 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_type, chat_completion_id, user_id, input_cost, output_cost, price_version, calculated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2025-03-12 12:54:14.862 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==> Parameters: deepseek-reasoner(String), f504f696-cefe-4e80-a864-4dce41bbcf5d(String), 689258T(String), 0.0001(BigDecimal), 0.0081(BigDecimal), 1(Integer), 2025-03-12T12:54:14.852967500(LocalDateTime)
2025-03-12 12:54:14.873 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - <==    Updates: 1
2025-03-12 12:58:31.914 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 12:58:31.915 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 12:58:31.923 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 12:58:31.924 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 12:58:31.924 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 12:58:31.929 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:03:31.891 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:03:31.891 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:03:31.899 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:03:31.900 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:03:31.900 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:03:31.916 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:08:31.888 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:08:31.889 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:08:31.896 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:08:31.896 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:08:31.896 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:08:31.901 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:13:31.912 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:13:31.913 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:13:31.921 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:13:31.921 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:13:31.921 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:13:31.926 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:18:31.890 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:18:31.891 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:18:31.899 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:18:31.900 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:18:31.900 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:18:31.908 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:23:31.896 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:23:31.896 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:23:31.904 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:23:31.904 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:23:31.904 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:23:31.910 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:28:31.895 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:28:31.896 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:28:31.911 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:28:31.911 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:28:31.912 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:28:31.917 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:33:31.912 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:33:31.913 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:33:31.919 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:33:31.919 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:33:31.919 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:33:31.925 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:38:31.890 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:38:31.891 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:38:31.898 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:38:31.898 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:38:31.898 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:38:31.906 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:38:35.017 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 13:38:35.023 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 13:38:35.029 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 13:50:53.212 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 13:50:53.246 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 11476 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 13:50:53.246 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 13:50:53.247 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 13:50:54.240 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 13:50:54.242 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 13:50:54.263 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 JPA repository interfaces.
2025-03-12 13:50:54.274 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 13:50:54.275 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 13:50:54.285 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-03-12 13:50:54.899 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:54.906 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:54.920 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:54.930 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:54.935 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:54.983 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:54.992 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:55.028 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:55.147 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:55.159 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:55.175 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:55.178 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:55.179 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:50:55.657 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 13:50:55.665 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 13:50:55.667 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 13:50:55.667 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 13:50:55.763 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 13:50:55.763 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2484 ms
2025-03-12 13:50:56.084 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 13:50:56.130 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 13:50:56.160 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 13:50:56.367 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 13:50:56.422 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 13:50:56.623 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 13:50:56.624 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 13:50:56.918 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 13:50:56.923 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 13:50:57.201 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:50:57.217 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:50:57.245 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:50:57.247 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:50:57.248 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:50:57.259 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:50:58.201 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 13:50:58.377 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 13:50:58.705 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 13:51:00.551 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 13:51:00.649 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 13:51:00.660 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 13:51:00.672 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.896 seconds (process running for 8.699)
2025-03-12 13:51:00.679 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:51:00.680 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:51:00.690 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:51:00.690 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:51:00.690 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:51:00.700 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:51:00.701 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:51:00.701 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:51:00.708 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:51:00.708 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:51:00.709 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:51:00.715 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:51:01.206 [RMI TCP Connection(4)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 13:51:01.206 [RMI TCP Connection(4)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 13:51:01.208 [RMI TCP Connection(4)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-12 13:51:06.152 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 13:51:06.153 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 13:51:06.163 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 13:51:38.622 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 13:51:38.623 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741758667(Long), deepseek-reasoner(String), fp_5417b77867_prod0311fp8(String), 0bde2bc9-7dce-4219-b430-774928a53d43(String)
2025-03-12 13:51:38.639 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 13:51:38.660 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_type,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 13:51:38.661 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: 0bde2bc9-7dce-4219-b430-774928a53d43(String)
2025-03-12 13:51:38.666 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 13:51:38.666 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 13:51:38.668 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: 0bde2bc9-7dce-4219-b430-774928a53d43(String), 32(Integer), 542(Integer), 574(Integer), 0(Integer), 458(Integer), 0(Integer), 32(Integer), 2025-03-12T13:51:38.659647400(LocalDateTime), deepseek-reasoner(String)
2025-03-12 13:51:38.689 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 13:51:38.749 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status = ?) ORDER BY effective_time DESC LIMIT 1
2025-03-12 13:51:38.750 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), input(String), 2025-03-12T13:51:38.747935500(LocalDateTime), miss(String)
2025-03-12 13:51:38.757 [http-nio-8080-exec-2] DEBUG c.b.b.m.PriceConfigMapper.selectList - <==      Total: 1
2025-03-12 13:51:38.866 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 13:51:38.867 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==> Parameters: 0bde2bc9-7dce-4219-b430-774928a53d43(String)
2025-03-12 13:51:38.874 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - <==      Total: 1
2025-03-12 13:51:38.874 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - 计费记录 - 会话ID:0bde2bc9-7dce-4219-b430-774928a53d43 模型类型:deepseek-reasoner 输入费用:0.0001 输出费用:0.0087
2025-03-12 13:51:38.927 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_type, chat_completion_id, user_id, input_cost, output_cost, price_version, calculated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2025-03-12 13:51:38.928 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==> Parameters: deepseek-reasoner(String), 0bde2bc9-7dce-4219-b430-774928a53d43(String), 689258T(String), 0.0001(BigDecimal), 0.0087(BigDecimal), 1(Integer), 2025-03-12T13:51:38.920375600(LocalDateTime)
2025-03-12 13:51:38.940 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - <==    Updates: 1
2025-03-12 13:52:10.913 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 13:52:10.916 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 13:52:10.924 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-12 13:54:33.387 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 7.0.4.Final
2025-03-12 13:54:33.421 [main] INFO  com.bgpay.bgai.BgaiApplication - Starting BgaiApplication using Java 21.0.6 with PID 35140 (E:\project\bgai\target\classes started by Administrator in E:\project\bgai)
2025-03-12 13:54:33.421 [main] DEBUG com.bgpay.bgai.BgaiApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-03-12 13:54:33.421 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-03-12 13:54:34.332 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 13:54:34.334 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-12 13:54:34.354 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2025-03-12 13:54:34.363 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-12 13:54:34.364 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-12 13:54:34.373 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-03-12 13:54:35.006 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.014 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.023 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.028 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionConfig' of type [com.bgpay.bgai.datasource.TransactionConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.032 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceConfig' of type [com.bgpay.bgai.datasource.DataSourceConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.065 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourcePropertiesConfig' of type [com.bgpay.bgai.datasource.DataSourcePropertiesConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.073 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.114 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'masterDataSource' of type [com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.201 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dynamicDataSource' of type [com.bgpay.bgai.datasource.DynamicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.208 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.jdbc.datasource.DataSourceTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.219 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionalAopConfig' of type [com.bgpay.bgai.config.TransactionalAopConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.222 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdvice' of type [org.springframework.transaction.interceptor.TransactionInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.223 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'txAdviceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [meterRegistryPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-03-12 13:54:35.660 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-03-12 13:54:35.668 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-03-12 13:54:35.669 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-12 13:54:35.670 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-03-12 13:54:35.769 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-12 13:54:35.769 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2314 ms
2025-03-12 13:54:36.081 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-12 13:54:36.127 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-03-12 13:54:36.156 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-12 13:54:36.360 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-12 13:54:36.415 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-12 13:54:36.633 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-12 13:54:36.634 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-03-12 13:54:36.919 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-03-12 13:54:36.923 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 13:54:37.190 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:54:37.206 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:54:37.233 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:54:37.235 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:54:37.235 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:54:37.247 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:54:38.164 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-03-12 13:54:38.341 [redisson-netty-4-6] INFO  o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 13:54:38.669 [redisson-netty-4-19] INFO  o.r.c.pool.MasterConnectionPool - 24 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-03-12 13:54:40.471 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-03-12 13:54:40.563 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-03-12 13:54:40.573 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-03-12 13:54:40.585 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 7.596 seconds (process running for 8.383)
2025-03-12 13:54:40.595 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:54:40.595 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:54:40.606 [main] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:54:40.607 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:54:40.607 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:54:40.617 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:54:40.618 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:54:40.618 [main] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:54:40.628 [main] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:54:40.629 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:54:40.629 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:54:40.635 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 13:54:40.894 [RMI TCP Connection(4)-192.168.86.8] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-12 13:54:40.895 [RMI TCP Connection(4)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-12 13:54:40.898 [RMI TCP Connection(4)-192.168.86.8] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-03-12 13:54:49.269 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,api_url,api_key,model_name,user_id FROM api_config WHERE (user_id = ?) ORDER BY id DESC
2025-03-12 13:54:49.270 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - ==> Parameters: 689258T(String)
2025-03-12 13:54:49.278 [http-nio-8080-exec-2] DEBUG c.b.b.m.ApiConfigMapper.selectList - <==      Total: 1
2025-03-12 13:55:12.604 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-03-12 13:55:12.605 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1741758890(Long), deepseek-reasoner(String), fp_5417b77867_prod0311fp8(String), be1b1aab-49c6-4419-95d7-2c91538e7d0b(String)
2025-03-12 13:55:12.620 [http-nio-8080-exec-2] DEBUG c.b.b.m.ChatCompletionsMapper.insert - <==    Updates: 1
2025-03-12 13:55:12.644 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_type,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 13:55:12.644 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - ==> Parameters: be1b1aab-49c6-4419-95d7-2c91538e7d0b(String)
2025-03-12 13:55:12.648 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-03-12 13:55:12.651 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - ==> Parameters: be1b1aab-49c6-4419-95d7-2c91538e7d0b(String), 32(Integer), 347(Integer), 379(Integer), 0(Integer), 284(Integer), 0(Integer), 32(Integer), 2025-03-12T13:55:12.641195200(LocalDateTime), deepseek-reasoner(String)
2025-03-12 13:55:12.651 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.selectList - <==      Total: 0
2025-03-12 13:55:12.664 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.b.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-03-12 13:55:12.786 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_record WHERE (chat_completion_id = ?)
2025-03-12 13:55:12.786 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - ==> Parameters: be1b1aab-49c6-4419-95d7-2c91538e7d0b(String)
2025-03-12 13:55:12.792 [http-nio-8080-exec-2] DEBUG c.b.b.m.U.selectCount - <==      Total: 1
2025-03-12 13:55:12.792 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - 计费记录 - 会话ID:be1b1aab-49c6-4419-95d7-2c91538e7d0b 模型类型:deepseek-reasoner 输入费用:0.0001 输出费用:0.0056
2025-03-12 13:55:12.823 [http-nio-8080-exec-2] INFO  c.b.b.s.impl.BillingServiceImpl - Output price config priceVersion: 1
2025-03-12 13:55:12.830 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_type, chat_completion_id, user_id, input_cost, output_cost, price_version, calculated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2025-03-12 13:55:12.831 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - ==> Parameters: deepseek-reasoner(String), be1b1aab-49c6-4419-95d7-2c91538e7d0b(String), 689258T(String), 0.0001(BigDecimal), 0.0056(BigDecimal), 1(Integer), 2025-03-12T13:55:12.823250(LocalDateTime)
2025-03-12 13:55:12.842 [http-nio-8080-exec-2] DEBUG c.b.b.m.UsageRecordMapper.insert - <==    Updates: 1
2025-03-12 13:59:42.620 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==>  Preparing: SELECT * FROM mime_type_config WHERE enabled = true
2025-03-12 13:59:42.621 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - ==> Parameters: 
2025-03-12 13:59:42.628 [scheduling-1] DEBUG c.b.b.m.F.selectActiveMimeTypes - <==      Total: 52
2025-03-12 13:59:42.629 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE enabled = true
2025-03-12 13:59:42.629 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - ==> Parameters: 
2025-03-12 13:59:42.635 [scheduling-1] DEBUG c.b.b.m.F.selectAllowedTypes - <==      Total: 52
2025-03-12 14:01:05.690 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-12 14:01:05.693 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-12 14:01:05.698 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
